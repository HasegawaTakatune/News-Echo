# プロジェクト名: News-Echo (Nuxt + Laravel Dual SSH)

以下の要件で、フロント・バックエンド両方のコンテナにSSH接続可能なフルスタック環境を生成してください。

## 1. インフラ構成 (Docker Compose)
- **backend (app)**: PHP 8.3-FPM + OpenSSH (Port 2222)
- **frontend (ui)**: Nuxt 3 + TypeScript + OpenSSH (Port 2223)
- **db**: PostgreSQL 16
- **web**: Nginx (リバースプロキシ設定)

## 2. インフラ詳細 & セキュリティ
- **SSH対応**: 両コンテナに SSH サーバーを構築。`.env` の `SSH_PUBLIC_KEY` を起動時に `authorized_keys` へ登録する `entrypoint.sh` を作成してください。
- **Git管理**: プロジェクトルート、`/backend`、`/frontend` のそれぞれに最適な `.gitignore` を作成してください（.env, node_modules, vendor, SSH鍵, build/dist 等を除外）。

## 3. アプリケーション設計
- **Frontend (Nuxt 3)**:
 - ログイン画面
    - ユーザ名またはメールアドレスとパスワードでログイン
    - ログイン成功時にはダッシュボード画面に遷移
    - ログイン失敗時にはエラーメッセージを表示
    - 新規ユーザ登録ボタン（新規ユーザ登録画面に遷移）
 - メールアドレス入力画面
    - メールアドレス入力
    - 確認ボタン（メールアドレス確認画面に遷移）
    - 戻るボタン（ログイン画面に遷移）
 - メールアドレス確認画面
    - メールアドレス確認
        - 5桁の英数字入力
    - 確認ボタン（メールアドレス確認成功時には新規ユーザ登録画面に遷移）
    - 戻るボタン（メールアドレス入力画面に遷移）
 - 新規ユーザ登録画面
    - ユーザ名入力
    - パスワード入力
    - パスワード確認入力
    - 登録ボタン（新規ユーザ登録成功時にはログイン画面に遷移）
    - 戻るボタン（ログイン画面に遷移）
 - ダッシュボード画面
    - ニュース一覧
        - 100件ごとのページネーション
    - ニュース登録・更新（ダイアログ）
        - タイトル入力
        - 投稿間隔セレクトボックス（1ヶ月～1年）
        - ユーザID（隠しフィールド）
    - ニュース削除確認（ダイアログ）
    - ログアウトボタン（ログアウト時にはログイン画面に遷移）
    - 設定ボタン（設定画面に遷移）
 - 設定画面
    - パスワード更新
    - 投稿アカウント変更（管理者）
    - ニュースのリサーチプロンプト変更（管理者）
    - 戻るボタン（ダッシュボード画面に遷移）
- **Backend (Laravel 11)**:
 - メールアドレスへ確認用トークン送信API
    - メールアドレスを確認
        - 5桁の英数字をメールアドレス宛に送信
    - メールアドレス確認失敗時にはエラーメッセージを表示
 - メールアドレス確認API
    - メールアドレスとトークンの組み合わせが一致しているか確認
 - 新規ユーザ登録API
    - 新規ユーザを登録
        - ユーザ名
        - メールアドレス
        - パスワード
    - 新規ユーザ登録失敗時にはエラーメッセージを表示
 - ログインAPI
    - ユーザ名またはメールアドレスとパスワードでログイン
    - ログイン失敗時にはエラーメッセージを表示
 - ニュース一覧取得API
    - ニュース一覧を取得
    - 100件ごとのページネーション
 - ニュース登録API
    - ニュースを登録
        - タイトル入力
        - 投稿間隔
        - ユーザID
 - ニュース更新API
    - ニュースを更新
        - タイトル入力
        投稿間隔
 - ニュース削除API
    - ニュースを削除
 - ログアウトAPI
    - ログアウト
 - 投稿アカウント変更API
    - 投稿アカウントを変更
 - ニュースのリサーチプロンプト変更API
    - ニュースのリサーチプロンプトを変更
 - ニュースの投稿バッチ
    - 毎晩0時にニュースデータから投稿間隔を参照して、投稿間隔に達したニュースの最新情報を調べる。
      調べた結果をSNSへ投稿する。

## 4. 成果物
- 全ての Dockerfile, docker-compose.yml, entrypoint.sh, nginx.conf
- Laravel: Migration, Model, Repository, Controller, Service, routes/api.php
- Nuxt: app.vue, components/ArticleModal.vue
- .env.example (SSH鍵、DB、API接続情報を含む)